# Make a spiral

> 在 n * n 的网格上，画一条螺旋线，要求不能出网格，不能和之前的线连通。

最简单的思路是可以直接模拟。

总长度参考 [OEIS A047838](https://oeis.org/A047838)。

另外这题还是可以直接计算出来的，不需要模拟。

所谓算出来是指给定行和列，可以不通过周围点的状态直接得到这个位置是 0 还是 1。

（下面没有证明，是观察的结论，想了一下好像可以归纳证明）观察 9 * 9 方阵。

```
#########
........#
#######.#
#.....#.#
#.###.#.#
#.#...#.#
#.#####.#
#.......#
#########
```

按对角线分成四个三角形，先考虑上、右和下方三个三角形（可以借用 Rust 的那几个全局 lazy_static 函数打印）

可以发现他们都是间隔一行（列）0 1 交错的，所以它们都非常好计算，不再赘述。

考虑左三角形，可以看到它们都有一个转折。每一列 1 的第二行变成了 0，每一列 0 的第二行变成了 1。

也就是说，排除掉每列的第二行，三角形还是符合规律的。这也可以特殊处理。

同理可以得到偶数长度的三角形也符合。

于是就算出来了。
